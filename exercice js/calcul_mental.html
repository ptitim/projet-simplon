<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <script type="text/javascript">
        //renvoi un aleatoire entier entre 1 et a ( ou a est strictement superieur a 1)
        var rand = function(a){
            return Math.floor(Math.random() * a + 1);
        };

        //choisie un operateur de facon aleatoire est le renvoie en string
        var operateurRandom = function(){
            var ale = rand(4);
            switch(ale){
                case 1:
                  return "+";
                case 2:
                  return "-";
                case 3:
                  return "*";
                case 4:
                  return "/";
            }
        };

        //crée un string contenant le calcul
        var calc = function(tableau){
            var str = "";
            for(var i = 0; i < tableau.length; i++){
                if(i != tableau.length -1){
                  str += tableau[i];
                  str += operateurRandom();
                }else{
                    str += tableau[i];
                }
            }
            console.log("str du calcul: " +str);
            return str;
        };

        var compteurReussite = 0;
        var continuer = true;//condition de la boucle while
        var reponse;//reponse utilisateur
        var calcul;//string du calcul
        var result;//resultat  du calcul a 2 chiffre pares la virgule
        var compliquer = true;//sert a verifier si le joueur a atteint le niveaux 10, de reinitialisent si il pert
        
      while(continuer){

          var chiffre1 = rand(9);
          var chiffre2 = rand(9);
          var tab = [chiffre1, chiffre2];

          if(compteurReussite > 2){
              tab.push(rand(9));
          }
          if(compteurReussite > 10){
              if(compliquer){
                  alert("vous vous débrouillez bien on va compliquer un peu");
                  compliquer = false;
              }
              tab.push(rand(50));
              tab.push(rand(50));
          }
          calcul = calc(tab);
          result = eval(calcul).toFixed(2);
          console.log("resultat : " +result);
          reponse = parseFloat(prompt("Calculer "+calcul+" de tete (Atention 2 chiffre aprés la virgule): ")).toFixed(2);

          if(reponse === result){
              alert("Bonne reponse!");
              compteurReussite++;
          }else{
              alert("mauvaise réponse");
              compteurReussite = 0;
              compliquer = true;
          }
          console.log("compteurReussite :" +compteurReussite);
          continuer = confirm("Voulez vous continuer ?");
      }


    </script>
  </body>
</html>
